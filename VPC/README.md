## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >=1.0.7 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_ibm"></a> [ibm](#provider\_ibm) | 1.39.0 |

## Modules

| Name | Source | Version |
|------|--------|---------|
|   [gcat-multizone-vpc-bastion-subnet](https://github.com/Cloud-Schematics/gcat-multizone-vpc-bastion-subnet)  | VPC/.  | v1.0.0
| <a name="module_subnets"></a> [subnets](#module\_subnets) | ./subnet | n/a |

## Resources

| Name | Type |
|------|------|
| [ibm_is_network_acl.multitier_acl](https://registry.terraform.io/providers/IBM-Cloud/ibm/latest/docs/resources/is_network_acl) | resource |
| [ibm_is_public_gateway.gateway](https://registry.terraform.io/providers/IBM-Cloud/ibm/latest/docs/resources/is_public_gateway) | resource |
| [ibm_is_security_group_rule.default_vpc_rule](https://registry.terraform.io/providers/IBM-Cloud/ibm/latest/docs/resources/is_security_group_rule) | resource |
| [ibm_is_vpc.vpc](https://registry.terraform.io/providers/IBM-Cloud/ibm/latest/docs/resources/is_vpc) | resource |
| [ibm_resource_group.resource_group](https://registry.terraform.io/providers/IBM-Cloud/ibm/latest/docs/data-sources/resource_group) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_TF_VERSION"></a> [TF\_VERSION](#input\_TF\_VERSION) | The version of the Terraform engine that's used in the Schematics workspace. | `string` | `"1.0"` | no |
| <a name="input_classic_access"></a> [classic\_access](#input\_classic\_access) | Enable VPC Classic Access. Note: only one VPC per ibmcloud\_region can have classic access | `bool` | `false` | no |
| <a name="input_ibmcloud_api_key"></a> [ibmcloud\_api\_key](#input\_ibmcloud\_api\_key) | The IBM Cloud platform API key needed to deploy IAM enabled resources | `string` | n/a | yes |
| <a name="input_ibmcloud_region"></a> [ibmcloud\_region](#input\_ibmcloud\_region) | Region where VPC will be created | `string` | `"us-south"` | no |
| <a name="input_ibmcloud_timeout"></a> [ibmcloud\_timeout](#input\_ibmcloud\_timeout) | IBM Cloud timeout value | `number` | `600` | no |
| <a name="input_network_acls"></a> [network\_acls](#input\_network\_acls) | List of ACLs to create. Rules can be automatically created to allow inbound and outbound traffic from a VPC tier by adding the name of that tier to the `network_connections` list. Rules automatically generated by these network connections will be added at the beginning of a list, and will be web-tierlied to traffic first. At least one rule must be provided for each ACL. | <pre>list(<br>    object({<br>      name                = string<br>      network_connections = optional(list(string))<br>      rules = list(<br>        object({<br>          name        = string<br>          action      = string<br>          destination = string<br>          direction   = string<br>          source      = string<br>          tcp = optional(<br>            object({<br>              port_max        = optional(number)<br>              port_min        = optional(number)<br>              source_port_max = optional(number)<br>              source_port_min = optional(number)<br>            })<br>          )<br>          udp = optional(<br>            object({<br>              port_max        = optional(number)<br>              port_min        = optional(number)<br>              source_port_max = optional(number)<br>              source_port_min = optional(number)<br>            })<br>          )<br>          icmp = optional(<br>            object({<br>              type = optional(number)<br>              code = optional(number)<br>            })<br>          )<br>        })<br>      )<br>    })<br>  )</pre> | <pre>[<br>  {<br>    "name": "vpc-acl",<br>    "network_connections": [<br>      "bastion"<br>    ],<br>    "rules": [<br>      {<br>        "action": "allow",<br>        "destination": "0.0.0.0/0",<br>        "direction": "inbound",<br>        "name": "allow-all-inbound",<br>        "source": "0.0.0.0/0"<br>      },<br>      {<br>        "action": "allow",<br>        "destination": "0.0.0.0/0",<br>        "direction": "outbound",<br>        "name": "allow-all-outbound",<br>        "source": "0.0.0.0/0"<br>      }<br>    ]<br>  },<br>  {<br>    "name": "bastion-acl",<br>    "network_connections": [<br>      "vpc"<br>    ],<br>    "rules": [<br>      {<br>        "action": "allow",<br>        "destination": "0.0.0.0/0",<br>        "direction": "inbound",<br>        "name": "allow-all-inbound",<br>        "source": "0.0.0.0/0"<br>      },<br>      {<br>        "action": "allow",<br>        "destination": "0.0.0.0/0",<br>        "direction": "outbound",<br>        "name": "allow-all-outbound",<br>        "source": "0.0.0.0/0"<br>      }<br>    ]<br>  }<br>]</pre> | no |
| <a name="input_prefix"></a> [prefix](#input\_prefix) | A unique identifier need to provision resources. Must begin with a letter | `string` | `"cloud-journey"` | no |
| <a name="input_resource_group"></a> [resource\_group](#input\_resource\_group) | Name of resource group where all infrastructure will be provisioned | `string` | n/a | yes |
| <a name="input_security_group_rules"></a> [security\_group\_rules](#input\_security\_group\_rules) | A list of security group rules to be added to the default vpc security group | <pre>list(<br>    object({<br>      name      = string<br>      direction = string<br>      remote    = string<br>      tcp = optional(<br>        object({<br>          port_max = optional(number)<br>          port_min = optional(number)<br>        })<br>      )<br>      udp = optional(<br>        object({<br>          port_max = optional(number)<br>          port_min = optional(number)<br>        })<br>      )<br>      icmp = optional(<br>        object({<br>          type = optional(number)<br>          code = optional(number)<br>        })<br>      )<br>    })<br>  )</pre> | <pre>[<br>  {<br>    "direction": "inbound",<br>    "icmp": {<br>      "type": 8<br>    },<br>    "name": "allow-inbound-ping",<br>    "remote": "0.0.0.0/0"<br>  },<br>  {<br>    "direction": "inbound",<br>    "name": "allow-inbound-ssh",<br>    "remote": "0.0.0.0/0",<br>    "tcp": {<br>      "port_max": 22,<br>      "port_min": 22<br>    }<br>  }<br>]</pre> | no |
| <a name="input_subnet_tiers"></a> [subnet\_tiers](#input\_subnet\_tiers) | List of subnets tiers for the vpc. | `list` | <pre>[<br>  {<br>    "acl_name": "vpc-acl",<br>    "name": "vpc",<br>    "subnets": {<br>      "zone-1": [<br>        {<br>          "cidr": "10.10.10.0/24",<br>          "name": "subnet-a",<br>          "public_gateway": true<br>        }<br>      ],<br>      "zone-2": [<br>        {<br>          "cidr": "10.20.10.0/24",<br>          "name": "subnet-b",<br>          "public_gateway": true<br>        }<br>      ],<br>      "zone-3": [<br>        {<br>          "cidr": "10.30.10.0/24",<br>          "name": "subnet-c",<br>          "public_gateway": true<br>        }<br>      ]<br>    }<br>  },<br>  {<br>    "acl_name": "bastion-acl",<br>    "name": "bastion",<br>    "subnets": {<br>      "zone-1": [<br>        {<br>          "cidr": "10.40.10.0/24",<br>          "name": "subnet-a",<br>          "public_gateway": false<br>        }<br>      ],<br>      "zone-2": [],<br>      "zone-3": []<br>    }<br>  }<br>]</pre> | no |
| <a name="input_use_public_gateways"></a> [use\_public\_gateways](#input\_use\_public\_gateways) | Create a public gateway in any of the three zones with `true`. | <pre>object({<br>    zone-1 = optional(bool)<br>    zone-2 = optional(bool)<br>    zone-3 = optional(bool)<br>  })</pre> | <pre>{<br>  "zone-1": true,<br>  "zone-2": true,<br>  "zone-3": true<br>}</pre> | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_subnet_detail_list"></a> [subnet\_detail\_list](#output\_subnet\_detail\_list) | A list of subnets containing names, CIDR blocks, and zones. |
| <a name="output_vpc_name"></a> [vpc\_name](#output\_vpc\_name) | ID of VPC created |
